<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.joonzis.mapper.ChatLogMapper">
	<insert id="insertChat" parameterType="org.joonzis.domain.ChatLogVO">
	    INSERT INTO GROUP_CHAT_LOG (
	        CHAT_NO, GROUP_NO, MEM_NO, CHAT_LOG, CHAT_TYPE, CHAT_TIME, CHAT_READ
	    ) VALUES (
	        CHAT_SEQ.NEXTVAL, #{groupNo}, #{memNo}, #{chatLog}, #{chatType}, SYSTIMESTAMP, 'N'
	    )
	</insert>
	
	<resultMap id="ChatLogMap" type="org.joonzis.domain.ChatLogVO">
	    <id property="chatNo" column="CHAT_NO"/>
	    <result property="groupNo" column="GROUP_NO"/>
	    <result property="memNo" column="MEM_NO"/>
	    <result property="chatLog" column="CHAT_LOG"/>
	    <result property="chatType" column="CHAT_TYPE"/>
	    <result property="chatRead" column="CHAT_READ"/>
	    <result property="chatTime" column="CHAT_TIME"/>
	</resultMap>
	
	<select id="getChatsByGroupNo" resultMap="ChatLogMap">
	    SELECT * FROM GROUP_CHAT_LOG WHERE GROUP_NO = #{groupNo}
	</select>
</mapper>